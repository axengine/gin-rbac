(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0792f8d9"],{1325:function(e,t,n){"use strict";n("b0c0");var c=n("f2bf");function a(e,t,n,a,o,u){var l=Object(c["Q"])("el-option"),r=Object(c["Q"])("el-select");return Object(c["H"])(),Object(c["k"])(r,{modelValue:a.setVal,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.setVal=e})},{default:Object(c["fb"])((function(){return[(Object(c["H"])(!0),Object(c["m"])(c["b"],null,Object(c["O"])(e.list,(function(e){return Object(c["H"])(),Object(c["k"])(l,{label:e.name,value:e.appId,key:e.appId},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])}var o=n("5530"),u=n("f5ab"),l=n("bc5c"),r={props:{modelValue:{type:String,default:void 0}},setup:function(e,t){var n=Object(c["L"])({list:[]}),a=function(){return Object(u["a"])("appSelect",{page:1,size:1e3}).then((function(e){(null===e||void 0===e?void 0:e.code)===l["a"].SUCCESS&&(n.list=e.data.list||[])}))};a();var r=Object(c["i"])({get:function(){return e.modelValue},set:function(e){console.log("appId",e),t.emit("update:modelValue",e)}});return Object(o["a"])(Object(o["a"])({},Object(c["X"])(n)),{},{setVal:r})}},i=n("6b0d"),d=n.n(i);const b=d()(r,[["render",a]]);t["a"]=b},"3e8d":function(e,t,n){"use strict";n.r(t);n("b0c0");var c=n("f2bf"),a={class:"ubn wd-100 ub-ver ht-100"},o=Object(c["p"])("添加目录树"),u={class:"ubn"},l={class:"ubn wd-100 flex-1"},r={class:"ubn ub-ver",style:{width:"300px"}},i=Object(c["n"])("div",{class:"ubn"},"菜单目录",-1),d=Object(c["n"])("div",{class:"ubn ht-100",style:{width:"1px","background-color":"#eee"}},null,-1),b={class:"ubn flex-1 ub-ver"},f=Object(c["p"])("确定"),p=Object(c["p"])("确定");function s(e,t,n,s,O,j){var m=Object(c["Q"])("app-list"),v=Object(c["Q"])("el-form-item"),h=Object(c["Q"])("el-button"),y=Object(c["Q"])("el-form"),I=Object(c["Q"])("el-divider"),q=Object(c["Q"])("menu-tree"),g=Object(c["Q"])("menu-action"),V=Object(c["Q"])("el-input"),C=Object(c["Q"])("el-option"),k=Object(c["Q"])("el-select"),w=Object(c["Q"])("el-input-number"),A=Object(c["Q"])("d-box"),D=Object(c["Q"])("actions");return Object(c["H"])(),Object(c["m"])("div",a,[Object(c["q"])(y,{inline:""},{default:Object(c["fb"])((function(){return[Object(c["q"])(v,{label:"选择操作APP",required:""},{default:Object(c["fb"])((function(){return[Object(c["q"])(m,{modelValue:s.appId,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.appId=e})},null,8,["modelValue"])]})),_:1}),Object(c["q"])(v,null,{default:Object(c["fb"])((function(){return[Object(c["q"])(h,{type:"primary",disabled:!s.appId,onClick:s.addRoot},{default:Object(c["fb"])((function(){return[o]})),_:1},8,["disabled","onClick"])]})),_:1})]})),_:1}),Object(c["n"])("div",u,"AppId: "+Object(c["U"])(e.selectId),1),Object(c["q"])(I),Object(c["n"])("div",l,[Object(c["n"])("div",r,[i,Object(c["q"])(q,{menu:e.menu,class:"mar-t20",onNodeClc:s.nodeClc},null,8,["menu","onNodeClc"])]),d,Object(c["n"])("div",b,[Object(c["q"])(g,{info:s.nodeInfo,onReloadTree:s.getMenus,onMenuAction:s.menuAction},null,8,["info","onReloadTree","onMenuAction"])])]),Object(c["q"])(A,{modelValue:e.showDb,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.showDb=t}),title:"add"===e.type?"新增":"修改"},{body:Object(c["fb"])((function(){return[Object(c["q"])(y,{model:e.dialogData,rules:e.rules,ref:"form","label-position":"top"},{default:Object(c["fb"])((function(){return[Object(c["q"])(v,{label:"名称",prop:"name"},{default:Object(c["fb"])((function(){return[Object(c["q"])(V,{modelValue:e.dialogData.name,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.dialogData.name=t})},null,8,["modelValue"])]})),_:1}),Object(c["q"])(v,{label:"类型",prop:"typ"},{default:Object(c["fb"])((function(){return[Object(c["q"])(k,{modelValue:e.dialogData.typ,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.dialogData.typ=t})},{default:Object(c["fb"])((function(){return[Object(c["q"])(C,{label:"分类",value:2}),Object(c["q"])(C,{label:"页面",value:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(c["q"])(v,{label:"PATH",prop:"path"},{default:Object(c["fb"])((function(){return[Object(c["q"])(V,{modelValue:e.dialogData.path,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.dialogData.path=t})},null,8,["modelValue"])]})),_:1}),Object(c["q"])(v,{label:"排序",prop:"sequence"},{default:Object(c["fb"])((function(){return[Object(c["q"])(w,{precision:0,min:0,modelValue:e.dialogData.sequence,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.dialogData.sequence=t}),controls:!1},null,8,["modelValue"])]})),_:1}),e.addNew?Object(c["l"])("",!0):(Object(c["H"])(),Object(c["k"])(v,{key:0,label:"状态",prop:"status"},{default:Object(c["fb"])((function(){return[Object(c["q"])(k,{modelValue:e.dialogData.status,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.dialogData.status=t})},{default:Object(c["fb"])((function(){return[Object(c["q"])(C,{label:"正常",value:1}),Object(c["q"])(C,{label:"限制",value:2})]})),_:1},8,["modelValue"])]})),_:1})),Object(c["q"])(v,{label:"备注",prop:"memo"},{default:Object(c["fb"])((function(){return[Object(c["q"])(V,{modelValue:e.dialogData.memo,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.dialogData.memo=t})},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),bottom:Object(c["fb"])((function(){return[Object(c["q"])(h,{type:"primary",onClick:s.confirmClc},{default:Object(c["fb"])((function(){return[f]})),_:1},8,["onClick"])]})),_:1},8,["modelValue","title"]),Object(c["q"])(A,{modelValue:e.showAction,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.showAction=t}),title:"添加功能"},{body:Object(c["fb"])((function(){return[Object(c["q"])(y,{model:e.dialogData,rules:e.rules,ref:"fromAction","label-position":"top"},{default:Object(c["fb"])((function(){return[Object(c["q"])(v,{label:"选择功能",prop:"actionId"},{default:Object(c["fb"])((function(){return[Object(c["q"])(D,{modelValue:e.dialogData.actionId,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.dialogData.actionId=t}),appId:s.appId},null,8,["modelValue","appId"])]})),_:1})]})),_:1},8,["model","rules"])]})),bottom:Object(c["fb"])((function(){return[Object(c["q"])(h,{type:"primary",onClick:s.confirmActionClc},{default:Object(c["fb"])((function(){return[p]})),_:1},8,["onClick"])]})),_:1},8,["modelValue"])])}var O=n("5530"),j=n("b85c"),m=(n("d81d"),n("f5ab")),v=n("bc5c"),h=n("1325"),y={class:"wd-100"};function I(e,t,n,a,o,u){var l=Object(c["Q"])("el-tree");return Object(c["H"])(),Object(c["k"])(l,{data:n.menu,"default-expand-all":"",label:"name","node-key":"id",onNodeClick:a.nodeClc},{default:Object(c["fb"])((function(e){var t=e.data;return[Object(c["n"])("span",y,[Object(c["n"])("span",null,"["+Object(c["U"])(t.sequence)+"] "+Object(c["U"])(t.name)+" "+Object(c["U"])(1===t.status?"":"已限制"),1)])]})),_:1},8,["data","onNodeClick"])}var q={props:{menu:{type:Array,default:function(){return[]}}},setup:function(e,t){var n=function(e,n){console.log(e);var c=e.id,a=e.memo,o=e.name,u=e.parentId,l=e.path,r=e.sequence,i=e.typ,d=e.appId;t.emit("menuAction",{actionType:n,id:c,memo:a,name:o,parentId:u,path:l,sequence:r,typ:i,appId:d})},c=function(e){var n=e.id;console.log("nodeClc",n),t.emit("nodeClc",n)},a=function(e){return 1===e.typ||2===e.typ};return{actionClc:n,nodeClc:c,checkType:a}}},g=n("6b0d"),V=n.n(g);const C=V()(q,[["render",I]]);var k=C,w=n("ad76"),A=(n("d3b7"),function(){var e=Object(c["M"])(null),t=function(t,n,c){return new Promise((function(a,o){return e.value.validate((function(e){return console.log("valid",e),e?(console.log("pass"),Object(m["b"])(t,n,c).then((function(e){a(e)}))):(console.log("not pass"),o(new Error("校验不通过")))}))}))};return{form:e,checkPost:t}}),D=A,_={class:"ubn wd-100 ub-ver"},U=Object(c["n"])("br",null,null,-1);function S(e,t,n,a,o,u){var l=Object(c["Q"])("el-input"),r=Object(c["Q"])("el-checkbox"),i=Object(c["Q"])("el-checkbox-group");return Object(c["H"])(),Object(c["m"])("div",_,[Object(c["q"])(l,{modelValue:e.filterStr,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filterStr=t}),placeholder:"关键字",clearable:""},null,8,["modelValue"]),Object(c["q"])(i,{modelValue:a.checkList,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.checkList=e}),class:"mar-0"},{default:Object(c["fb"])((function(){return[(Object(c["H"])(!0),Object(c["m"])(c["b"],null,Object(c["O"])(a.filterList,(function(e){return Object(c["H"])(),Object(c["k"])(r,{key:e.id,label:e.id,disabled:2==e.status},{default:Object(c["fb"])((function(){return[Object(c["p"])(Object(c["U"])(e.name)+" ["+Object(c["U"])(e.method)+"]",1)]})),_:2},1032,["label","disabled"])})),128)),U]})),_:1},8,["modelValue"])])}n("159b"),n("4de4");var Q={props:{modelValue:{type:Array,default:function(){return[]}},appId:{type:String,default:""}},setup:function(e,t){var n=Object(c["L"])({list:[],filterStr:""}),a=Object(c["i"])((function(){return e.appId})),o=function(){if(a.value)return Object(m["a"])("actionList",{appId:e.appId,size:1e3}).then((function(e){(null===e||void 0===e?void 0:e.code)===v["a"].SUCCESS&&(n.list=e.data.list)}))};o();var u=Object(c["i"])((function(){var t={};return e.modelValue.forEach((function(e){var n=e.id;t[n]=!0})),t})),l=Object(c["i"])({get:function(){return e.modelValue||[]},set:function(e){t.emit("update:modelValue",e)}}),r=Object(c["i"])((function(){return n.filterStr?n.list.filter((function(e){return-1!==e.name.indexOf(n.filterStr)})):n.list}));return Object(c["db"])(a,o),Object(O["a"])(Object(O["a"])({},Object(c["X"])(n)),{},{actionMap:u,checkList:l,filterList:r})}};const L=V()(Q,[["render",S]]);var x=L,T={class:"ubn wd-100 ub-ver",style:{padding:"20px"}},H=Object(c["n"])("div",{class:"ubn"},"菜单管理",-1),E={class:"ubn mar-t20"},M=Object(c["p"])("修改页面"),P=Object(c["p"])("删除页面"),N=Object(c["p"])("添加子页面"),R=Object(c["p"])("添加功能"),X=Object(c["p"])("删除");function z(e,t,n,a,o,u){var l=Object(c["Q"])("el-button"),r=Object(c["Q"])("el-form-item"),i=Object(c["Q"])("el-form"),d=Object(c["Q"])("el-table-column"),b=Object(c["Q"])("el-table");return Object(c["H"])(),Object(c["m"])("div",T,[H,Object(c["n"])("div",E,Object(c["U"])(a.nodeInfo.path)+" "+Object(c["U"])(1===a.nodeInfo.status?"":"已限制"),1),Object(c["q"])(i,{inline:"",class:"mar-t20"},{default:Object(c["fb"])((function(){return[Object(c["q"])(r,null,{default:Object(c["fb"])((function(){return[Object(c["q"])(l,{type:"primary",disabled:!a.menuId,onClick:t[0]||(t[0]=function(e){return a.actionClc("modify")})},{default:Object(c["fb"])((function(){return[M]})),_:1},8,["disabled"]),Object(c["q"])(l,{type:"danger",disabled:!a.menuId,onClick:a.delClc},{default:Object(c["fb"])((function(){return[P]})),_:1},8,["disabled","onClick"]),Object(c["q"])(l,{type:"success",disabled:!a.menuId||1===a.type||e.actionList.length>0,onClick:t[1]||(t[1]=function(e){return a.actionClc("add")})},{default:Object(c["fb"])((function(){return[N]})),_:1},8,["disabled"]),Object(c["q"])(l,{type:"success",disabled:!a.menuId||2===a.type,onClick:t[2]||(t[2]=function(e){return a.actionClc("action")})},{default:Object(c["fb"])((function(){return[R]})),_:1},8,["disabled"])]})),_:1})]})),_:1}),Object(c["q"])(b,{data:e.actionList},{default:Object(c["fb"])((function(){return[Object(c["q"])(d,{label:"ID",prop:"id",width:"50px"}),Object(c["q"])(d,{label:"AppId",prop:"appId",width:"100px"}),Object(c["q"])(d,{label:"Name",prop:"name"}),Object(c["q"])(d,{label:"Path",prop:"path"}),Object(c["q"])(d,{label:"Method",prop:"method",width:"100px"}),Object(c["q"])(d,{label:"操作"},{default:Object(c["fb"])((function(e){var t=e.row;return[Object(c["q"])(l,{onClick:function(e){return a.delAction(t)},type:"text"},{default:Object(c["fb"])((function(){return[X]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])])}var J=n("4f96"),F=(n("fb6a"),n("e000")),B={props:{info:{type:Object,default:function(){return{}}}},setup:function(e,t){var n=Object(c["L"])({actionList:[],dialogData:{}}),a=Object(c["i"])((function(){return e.info||{}})),o=Object(c["i"])((function(){return a.value.id||!1})),u=Object(c["i"])((function(){return a.value.actions||[]})),l=Object(c["i"])((function(){return a.value.typ})),r=function(){var e=u.value;if(0!==e.length)return Object(m["b"])("actionFind",{actionId:e,appId:a.value.appId}).then((function(e){(null===e||void 0===e?void 0:e.code)===v["a"].SUCCESS&&(n.actionList=e.data.actions)}));n.actionList=[]},i=function(e){var n=e.id,c=Object(J["a"])(u.value),a=c.slice(0),l=a.filter((function(e){return e!==n}));console.log("del",l),Object(F["a"])("menuActionUpdate",{menuId:o.value,actionId:l}).then((function(e){console.log("reloadTree>>>>>"),t.emit("reloadTree")}))},d=function(e){var n=a.value;console.log("==>",n);var c=n.id,o=n.memo,u=n.name,l=n.parentId,r=n.path,i=n.sequence,d=n.typ,b=n.appId,f=n.status;console.log("==> status",f),t.emit("menuAction",{actionType:e,id:c,memo:o,name:u,parentId:l,path:r,sequence:i,typ:d,appId:b,status:f})},b=function(){var e=o.value;return Object(F["a"])("menuDel",{id:e}).then((function(e){(null===e||void 0===e?void 0:e.code)===v["a"].SUCCESS&&t.emit("reloadTree")}))};return Object(c["db"])([o,u],r),Object(O["a"])(Object(O["a"])({nodeInfo:a,menuId:o},Object(c["X"])(n)),{},{delAction:i,actionClc:d,delClc:b,type:l})}};const G=V()(B,[["render",z]]);var K=G,W={components:{appList:h["a"],MenuTree:k,Actions:x,MenuAction:K},setup:function(){var e=Object(c["L"])({menu:[],appList:[],selectId:void 0,showDb:!1,showAction:!1,dialogData:{},rules:Object(w["a"])(["name","sequence","typ","path"]),type:"",menuId:""}),t=Object(c["i"])({get:function(){return e.selectId},set:function(t){console.log("menu",t),e.selectId=t}}),n=D(),a=n.form,o=n.checkPost,u=D(),l=u.form,r=u.checkPost,i=function(){return Object(m["a"])("menuTree",{appId:t.value}).then((function(t){(null===t||void 0===t?void 0:t.code)===v["a"].SUCCESS&&(e.menu=t.data.dirs)}))},d=function(){e.dialogData={name:"",appId:t.value,path:"",typ:1,sequence:0,memo:"",parentId:0,status:1},e.type="add",e.showDb=!0},b=function(){var t="add"===e.type?"menuCreate":"menuUpdate";o(t,e.dialogData).then((function(t){t&&(e.showDb=!1,i())}))},f=function(){r("menuActionUpdate",e.dialogData).then((function(t){t&&(e.showAction=!1,i())}))},p=function(t){var n=t.actionType,c=t.id,a=t.memo,o=t.name,u=t.parentId,l=t.path,r=t.sequence,i=t.typ,d=t.appId,b=t.status;console.log("menuAction",t),e.type=n,"add"===n?(e.dialogData={name:"",appId:d,path:"",typ:1,sequence:0,memo:"",parentId:c},e.showDb=!0):"modify"===n?(e.dialogData={id:c,memo:a,name:o,parentId:u,path:l,sequence:r,typ:i,status:b},e.showDb=!0):"delete"===n||"action"===n&&Object(m["a"])("menuActions",{menuId:c}).then((function(t){if((null===t||void 0===t?void 0:t.code)===v["a"].SUCCESS){var n=t.data.actions.map((function(e){return e.id}));e.dialogData={menuId:c,actionId:n,appId:d.value},e.showAction=!0}}))},s=function(t){e.menuId=t},h=Object(c["i"])((function(){var t=e.menuId;return t?y(t,e.menu):{}})),y=function e(t,n){var c,a=Object(j["a"])(n);try{for(a.s();!(c=a.n()).done;){var o=c.value;if(o.id===t)return o;var u=o.children||[];if(u.length>0){var l=e(t,u);if(null!==l&&void 0!==l&&l.id)return l}}}catch(r){a.e(r)}finally{a.f()}return{}};return Object(c["db"])(t,i),Object(O["a"])(Object(O["a"])({},Object(c["X"])(e)),{},{appId:t,addRoot:d,confirmClc:b,form:a,menuAction:p,fromAction:l,checkPostAction:r,confirmActionClc:f,nodeClc:s,getMenus:i,nodeInfo:h})}};const Y=V()(W,[["render",s]]);t["default"]=Y},"4f96":function(e,t,n){"use strict";function c(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return l}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var o=n("06c5");function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return c(e)||a(e)||Object(o["a"])(e)||u()}},ad76:function(e,t,n){"use strict";var c=n("b85c");t["a"]=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={},a=Object(c["a"])(t);try{for(a.s();!(e=a.n()).done;){var o=e.value,u=[{required:!0,message:"请输入...",trigger:"blur"}];n[o]=u}}catch(l){a.e(l)}finally{a.f()}return n}},d81d:function(e,t,n){"use strict";var c=n("23e7"),a=n("b727").map,o=n("1dde"),u=o("map");c({target:"Array",proto:!0,forced:!u},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},e000:function(e,t,n){"use strict";var c=n("7864"),a=n("f5ab");t["a"]=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"你确定要进行该操作吗?";return c["b"].confirm(n,"确认").then((function(){return Object(a["b"])(e,t)})).catch((function(e){console.log(e)}))}}}]);
//# sourceMappingURL=chunk-0792f8d9.94c75643.js.map