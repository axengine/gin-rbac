(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b84f9f2"],{1325:function(e,t,n){"use strict";n("b0c0");var c=n("f2bf");function o(e,t,n,o,a,r){var u=Object(c["Q"])("el-option"),l=Object(c["Q"])("el-select");return Object(c["H"])(),Object(c["k"])(l,{modelValue:o.setVal,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.setVal=e})},{default:Object(c["fb"])((function(){return[(Object(c["H"])(!0),Object(c["m"])(c["b"],null,Object(c["O"])(e.list,(function(e){return Object(c["H"])(),Object(c["k"])(u,{label:e.name,value:e.appId,key:e.appId},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])}var a=n("5530"),r=n("f5ab"),u=n("bc5c"),l={props:{modelValue:{type:String,default:void 0}},setup:function(e,t){var n=Object(c["L"])({list:[]}),o=function(){return Object(r["a"])("appSelect",{page:1,size:1e3}).then((function(e){(null===e||void 0===e?void 0:e.code)===u["a"].SUCCESS&&(n.list=e.data.list||[])}))};o();var l=Object(c["i"])({get:function(){return e.modelValue},set:function(e){console.log("appId",e),t.emit("update:modelValue",e)}});return Object(a["a"])(Object(a["a"])({},Object(c["X"])(n)),{},{setVal:l})}},i=n("6b0d"),d=n.n(i);const b=d()(l,[["render",o]]);t["a"]=b},"159b":function(e,t,n){var c=n("da84"),o=n("fdbc"),a=n("785a"),r=n("17c2"),u=n("9112"),l=function(e){if(e&&e.forEach!==r)try{u(e,"forEach",r)}catch(t){e.forEach=r}};for(var i in o)o[i]&&l(c[i]&&c[i].prototype);l(a)},"17c2":function(e,t,n){"use strict";var c=n("b727").forEach,o=n("a640"),a=o("forEach");e.exports=a?[].forEach:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}},"3e8d":function(e,t,n){"use strict";n.r(t);n("b0c0");var c=n("f2bf"),o={class:"ubn wd-100 ub-ver ht-100"},a=Object(c["p"])("添加目录树"),r={class:"ubn"},u={class:"ubn wd-100 flex-1"},l={class:"ubn ub-ver",style:{width:"300px"}},i=Object(c["n"])("div",{class:"ubn"},"菜单目录",-1),d=Object(c["n"])("div",{class:"ubn ht-100",style:{width:"1px","background-color":"#eee"}},null,-1),b={class:"ubn flex-1 ub-ver"},f=Object(c["p"])("确定"),p=Object(c["p"])("确定");function s(e,t,n,s,O,j){var m=Object(c["Q"])("app-list"),v=Object(c["Q"])("el-form-item"),h=Object(c["Q"])("el-button"),y=Object(c["Q"])("el-form"),g=Object(c["Q"])("el-divider"),I=Object(c["Q"])("menu-tree"),q=Object(c["Q"])("menu-action"),C=Object(c["Q"])("el-input"),V=Object(c["Q"])("el-option"),w=Object(c["Q"])("el-select"),k=Object(c["Q"])("el-input-number"),D=Object(c["Q"])("d-box"),A=Object(c["Q"])("actions");return Object(c["H"])(),Object(c["m"])("div",o,[Object(c["q"])(y,{inline:""},{default:Object(c["fb"])((function(){return[Object(c["q"])(v,{label:"选择操作APP",required:""},{default:Object(c["fb"])((function(){return[Object(c["q"])(m,{modelValue:s.appId,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.appId=e})},null,8,["modelValue"])]})),_:1}),Object(c["q"])(v,null,{default:Object(c["fb"])((function(){return[Object(c["q"])(h,{type:"primary",disabled:!s.appId,onClick:s.addRoot},{default:Object(c["fb"])((function(){return[a]})),_:1},8,["disabled","onClick"])]})),_:1})]})),_:1}),Object(c["n"])("div",r,"AppId: "+Object(c["U"])(e.selectId),1),Object(c["q"])(g),Object(c["n"])("div",u,[Object(c["n"])("div",l,[i,Object(c["q"])(I,{menu:e.menu,class:"mar-t20",onNodeClc:s.nodeClc},null,8,["menu","onNodeClc"])]),d,Object(c["n"])("div",b,[Object(c["q"])(q,{info:s.nodeInfo,onReloadTree:s.getMenus,onMenuAction:s.menuAction},null,8,["info","onReloadTree","onMenuAction"])])]),Object(c["q"])(D,{modelValue:e.showDb,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.showDb=t}),title:"add"===e.type?"新增":"修改"},{body:Object(c["fb"])((function(){return[Object(c["q"])(y,{model:e.dialogData,rules:e.rules,ref:"form","label-position":"top"},{default:Object(c["fb"])((function(){return[Object(c["q"])(v,{label:"名称",prop:"name"},{default:Object(c["fb"])((function(){return[Object(c["q"])(C,{modelValue:e.dialogData.name,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.dialogData.name=t})},null,8,["modelValue"])]})),_:1}),Object(c["q"])(v,{label:"类型",prop:"typ"},{default:Object(c["fb"])((function(){return[Object(c["q"])(w,{modelValue:e.dialogData.typ,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.dialogData.typ=t})},{default:Object(c["fb"])((function(){return[Object(c["q"])(V,{label:"分类",value:2}),Object(c["q"])(V,{label:"页面",value:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(c["q"])(v,{label:"PATH",prop:"path"},{default:Object(c["fb"])((function(){return[Object(c["q"])(C,{modelValue:e.dialogData.path,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.dialogData.path=t})},null,8,["modelValue"])]})),_:1}),Object(c["q"])(v,{label:"排序",prop:"sequence"},{default:Object(c["fb"])((function(){return[Object(c["q"])(k,{precision:0,min:0,modelValue:e.dialogData.sequence,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.dialogData.sequence=t}),controls:!1},null,8,["modelValue"])]})),_:1}),Object(c["q"])(v,{label:"备注",prop:"memo"},{default:Object(c["fb"])((function(){return[Object(c["q"])(C,{modelValue:e.dialogData.memo,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.dialogData.memo=t})},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),bottom:Object(c["fb"])((function(){return[Object(c["q"])(h,{type:"primary",onClick:s.confirmClc},{default:Object(c["fb"])((function(){return[f]})),_:1},8,["onClick"])]})),_:1},8,["modelValue","title"]),Object(c["q"])(D,{modelValue:e.showAction,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.showAction=t}),title:"添加功能"},{body:Object(c["fb"])((function(){return[Object(c["q"])(y,{model:e.dialogData,rules:e.rules,ref:"fromAction","label-position":"top"},{default:Object(c["fb"])((function(){return[Object(c["q"])(v,{label:"选择功能",prop:"actionId"},{default:Object(c["fb"])((function(){return[Object(c["q"])(A,{modelValue:e.dialogData.actionId,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.dialogData.actionId=t}),appId:s.appId},null,8,["modelValue","appId"])]})),_:1})]})),_:1},8,["model","rules"])]})),bottom:Object(c["fb"])((function(){return[Object(c["q"])(h,{type:"primary",onClick:s.confirmActionClc},{default:Object(c["fb"])((function(){return[p]})),_:1},8,["onClick"])]})),_:1},8,["modelValue"])])}var O=n("5530"),j=n("b85c"),m=(n("d81d"),n("f5ab")),v=n("bc5c"),h=n("1325"),y={class:"wd-100"};function g(e,t,n,o,a,r){var u=Object(c["Q"])("el-tree");return Object(c["H"])(),Object(c["k"])(u,{data:n.menu,"default-expand-all":"",label:"name","node-key":"id",onNodeClick:o.nodeClc},{default:Object(c["fb"])((function(e){var t=e.data;return[Object(c["n"])("span",y,[Object(c["n"])("span",null,"["+Object(c["U"])(t.sequence)+"] "+Object(c["U"])(t.name),1)])]})),_:1},8,["data","onNodeClick"])}var I={props:{menu:{type:Array,default:function(){return[]}}},setup:function(e,t){var n=function(e,n){console.log(e);var c=e.id,o=e.memo,a=e.name,r=e.parentId,u=e.path,l=e.sequence,i=e.typ,d=e.appId;t.emit("menuAction",{actionType:n,id:c,memo:o,name:a,parentId:r,path:u,sequence:l,typ:i,appId:d})},c=function(e){var n=e.id;console.log("nodeClc",n),t.emit("nodeClc",n)},o=function(e){return 1===e.typ||2===e.typ};return{actionClc:n,nodeClc:c,checkType:o}}},q=n("6b0d"),C=n.n(q);const V=C()(I,[["render",g]]);var w=V,k=n("ad76"),D=(n("d3b7"),function(){var e=Object(c["M"])(null),t=function(t,n,c){return new Promise((function(o,a){return e.value.validate((function(e){return console.log("valid",e),e?(console.log("pass"),Object(m["b"])(t,n,c).then((function(e){o(e)}))):(console.log("not pass"),a(new Error("校验不通过")))}))}))};return{form:e,checkPost:t}}),A=D,S={class:"ubn wd-100 ub-ver"},_=Object(c["n"])("br",null,null,-1);function U(e,t,n,o,a,r){var u=Object(c["Q"])("el-input"),l=Object(c["Q"])("el-checkbox"),i=Object(c["Q"])("el-checkbox-group");return Object(c["H"])(),Object(c["m"])("div",S,[Object(c["q"])(u,{modelValue:e.filterStr,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filterStr=t}),placeholder:"关键字",clearable:""},null,8,["modelValue"]),Object(c["q"])(i,{modelValue:o.checkList,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.checkList=e}),class:"mar-t10"},{default:Object(c["fb"])((function(){return[(Object(c["H"])(!0),Object(c["m"])(c["b"],null,Object(c["O"])(o.filterList,(function(e){return Object(c["H"])(),Object(c["k"])(l,{key:e.id,label:e.id,disabled:2==e.status},{default:Object(c["fb"])((function(){return[Object(c["p"])(Object(c["U"])(e.name)+" ["+Object(c["U"])(e.method)+"]",1)]})),_:2},1032,["label","disabled"])})),128)),_]})),_:1},8,["modelValue"])])}n("159b"),n("4de4");var Q={props:{modelValue:{type:Array,default:function(){return[]}},appId:{type:String,default:""}},setup:function(e,t){var n=Object(c["L"])({list:[],filterStr:""}),o=Object(c["i"])((function(){return e.appId})),a=function(){if(o.value)return Object(m["a"])("actionList",{appId:e.appId,size:1e3}).then((function(e){(null===e||void 0===e?void 0:e.code)===v["a"].SUCCESS&&(n.list=e.data.list)}))};a();var r=Object(c["i"])((function(){var t={};return e.modelValue.forEach((function(e){var n=e.id;t[n]=!0})),t})),u=Object(c["i"])({get:function(){return e.modelValue||[]},set:function(e){t.emit("update:modelValue",e)}}),l=Object(c["i"])((function(){return n.filterStr?n.list.filter((function(e){return-1!==e.name.indexOf(n.filterStr)})):n.list}));return Object(c["db"])(o,a),Object(O["a"])(Object(O["a"])({},Object(c["X"])(n)),{},{actionMap:r,checkList:u,filterList:l})}};const P=C()(Q,[["render",U]]);var E=P,L={class:"ubn wd-100 ub-ver",style:{padding:"20px"}},x=Object(c["n"])("div",{class:"ubn"},"菜单管理",-1),T={class:"ubn mar-t20"},H=Object(c["p"])("修改页面"),M=Object(c["p"])("删除页面"),N=Object(c["p"])("添加子页面"),R=Object(c["p"])("添加功能"),X=Object(c["p"])("删除");function z(e,t,n,o,a,r){var u=Object(c["Q"])("el-button"),l=Object(c["Q"])("el-form-item"),i=Object(c["Q"])("el-form"),d=Object(c["Q"])("el-table-column"),b=Object(c["Q"])("el-table");return Object(c["H"])(),Object(c["m"])("div",L,[x,Object(c["n"])("div",T,Object(c["U"])(o.nodeInfo.path),1),Object(c["q"])(i,{inline:"",class:"mar-t20"},{default:Object(c["fb"])((function(){return[Object(c["q"])(l,null,{default:Object(c["fb"])((function(){return[Object(c["q"])(u,{type:"primary",disabled:!o.menuId,onClick:t[0]||(t[0]=function(e){return o.actionClc("modify")})},{default:Object(c["fb"])((function(){return[H]})),_:1},8,["disabled"]),Object(c["q"])(u,{type:"danger",disabled:!o.menuId,onClick:o.delClc},{default:Object(c["fb"])((function(){return[M]})),_:1},8,["disabled","onClick"]),Object(c["q"])(u,{type:"success",disabled:!o.menuId||1===o.type||e.actionList.length>0,onClick:t[1]||(t[1]=function(e){return o.actionClc("add")})},{default:Object(c["fb"])((function(){return[N]})),_:1},8,["disabled"]),Object(c["q"])(u,{type:"success",disabled:!o.menuId||2===o.type,onClick:t[2]||(t[2]=function(e){return o.actionClc("action")})},{default:Object(c["fb"])((function(){return[R]})),_:1},8,["disabled"])]})),_:1})]})),_:1}),Object(c["q"])(b,{data:e.actionList},{default:Object(c["fb"])((function(){return[Object(c["q"])(d,{label:"ID",prop:"id",width:"50px"}),Object(c["q"])(d,{label:"AppId",prop:"appId",width:"100px"}),Object(c["q"])(d,{label:"Name",prop:"name"}),Object(c["q"])(d,{label:"Path",prop:"path"}),Object(c["q"])(d,{label:"Method",prop:"method",width:"100px"}),Object(c["q"])(d,{label:"操作"},{default:Object(c["fb"])((function(e){var t=e.row;return[Object(c["q"])(u,{onClick:function(e){return o.delAction(t)},type:"text"},{default:Object(c["fb"])((function(){return[X]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])])}var J=n("4f96"),F=(n("fb6a"),n("e000")),B={props:{info:{type:Object,default:function(){return{}}}},setup:function(e,t){var n=Object(c["L"])({actionList:[],dialogData:{}}),o=Object(c["i"])((function(){return e.info||{}})),a=Object(c["i"])((function(){return o.value.id||!1})),r=Object(c["i"])((function(){return o.value.actions||[]})),u=Object(c["i"])((function(){return o.value.typ})),l=function(){var e=r.value;if(0!==e.length)return Object(m["b"])("actionFind",{actionId:e,appId:o.value.appId}).then((function(e){(null===e||void 0===e?void 0:e.code)===v["a"].SUCCESS&&(n.actionList=e.data.actions)}));n.actionList=[]},i=function(e){var n=e.id,c=Object(J["a"])(r.value),o=c.slice(0),u=o.filter((function(e){return e!==n}));console.log("del",u),Object(F["a"])("menuActionUpdate",{menuId:a.value,actionId:u}).then((function(e){console.log("reloadTree>>>>>"),t.emit("reloadTree")}))},d=function(e){var n=o.value;console.log(n);var c=n.id,a=n.memo,r=n.name,u=n.parentId,l=n.path,i=n.sequence,d=n.typ,b=n.appId;t.emit("menuAction",{actionType:e,id:c,memo:a,name:r,parentId:u,path:l,sequence:i,typ:d,appId:b})},b=function(){var e=a.value;return Object(F["a"])("menuDel",{id:e}).then((function(e){(null===e||void 0===e?void 0:e.code)===v["a"].SUCCESS&&t.emit("reloadTree")}))};return Object(c["db"])([a,r],l),Object(O["a"])(Object(O["a"])({nodeInfo:o,menuId:a},Object(c["X"])(n)),{},{delAction:i,actionClc:d,delClc:b,type:u})}};const G=C()(B,[["render",z]]);var K=G,W={components:{appList:h["a"],MenuTree:w,Actions:E,MenuAction:K},setup:function(){var e=Object(c["L"])({menu:[],appList:[],selectId:void 0,showDb:!1,showAction:!1,dialogData:{},rules:Object(k["a"])(["name","sequence","typ","path"]),type:"",menuId:""}),t=Object(c["i"])({get:function(){return e.selectId},set:function(t){console.log("menu",t),e.selectId=t}}),n=A(),o=n.form,a=n.checkPost,r=A(),u=r.form,l=r.checkPost,i=function(){return Object(m["a"])("menuTree",{appId:t.value}).then((function(t){(null===t||void 0===t?void 0:t.code)===v["a"].SUCCESS&&(e.menu=t.data.dirs)}))},d=function(){e.dialogData={name:"",appId:t.value,path:"",typ:1,sequence:0,memo:"",parentId:0},e.type="add",e.showDb=!0},b=function(){var t="add"===e.type?"menuCreate":"menuUpdate";a(t,e.dialogData).then((function(t){t&&(e.showDb=!1,i())}))},f=function(){l("menuActionUpdate",e.dialogData).then((function(t){t&&(e.showAction=!1,i())}))},p=function(t){var n=t.actionType,c=t.id,o=t.memo,a=t.name,r=t.parentId,u=t.path,l=t.sequence,i=t.typ,d=t.appId;console.log("menuAction",t),e.type=n,"add"===n?(e.dialogData={name:"",appId:d,path:"",typ:1,sequence:0,memo:"",parentId:c},e.showDb=!0):"modify"===n?(e.dialogData={id:c,memo:o,name:a,parentId:r,path:u,sequence:l,typ:i},e.showDb=!0):"delete"===n||"action"===n&&Object(m["a"])("menuActions",{menuId:c}).then((function(t){if((null===t||void 0===t?void 0:t.code)===v["a"].SUCCESS){var n=t.data.actions.map((function(e){return e.id}));e.dialogData={menuId:c,actionId:n,appId:d.value},e.showAction=!0}}))},s=function(t){e.menuId=t},h=Object(c["i"])((function(){var t=e.menuId;return t?y(t,e.menu):{}})),y=function e(t,n){var c,o=Object(j["a"])(n);try{for(o.s();!(c=o.n()).done;){var a=c.value;if(a.id===t)return a;var r=a.children||[];if(r.length>0){var u=e(t,r);if(null!==u&&void 0!==u&&u.id)return u}}}catch(l){o.e(l)}finally{o.f()}return{}};return Object(c["db"])(t,i),Object(O["a"])(Object(O["a"])({},Object(c["X"])(e)),{},{appId:t,addRoot:d,confirmClc:b,form:o,menuAction:p,fromAction:u,checkPostAction:l,confirmActionClc:f,nodeClc:s,getMenus:i,nodeInfo:h})}};const Y=C()(W,[["render",s]]);t["default"]=Y},"4de4":function(e,t,n){"use strict";var c=n("23e7"),o=n("b727").filter,a=n("1dde"),r=a("filter");c({target:"Array",proto:!0,forced:!r},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"4f96":function(e,t,n){"use strict";function c(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return u}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var a=n("06c5");function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){return c(e)||o(e)||Object(a["a"])(e)||r()}},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("159b"),n("dbb4");var c=n("ade3");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},a640:function(e,t,n){"use strict";var c=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&c((function(){n.call(null,t||function(){throw 1},1)}))}},ad76:function(e,t,n){"use strict";var c=n("b85c");t["a"]=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={},o=Object(c["a"])(t);try{for(o.s();!(e=o.n()).done;){var a=e.value,r=[{required:!0,message:"请输入...",trigger:"blur"}];n[a]=r}}catch(u){o.e(u)}finally{o.f()}return n}},ade3:function(e,t,n){"use strict";function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return c}))},b64b:function(e,t,n){var c=n("23e7"),o=n("7b0b"),a=n("df75"),r=n("d039"),u=r((function(){a(1)}));c({target:"Object",stat:!0,forced:u},{keys:function(e){return a(o(e))}})},d81d:function(e,t,n){"use strict";var c=n("23e7"),o=n("b727").map,a=n("1dde"),r=a("map");c({target:"Array",proto:!0,forced:!r},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(e,t,n){var c=n("23e7"),o=n("83ab"),a=n("56ef"),r=n("fc6a"),u=n("06cf"),l=n("8418");c({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){var t,n,c=r(e),o=u.f,i=a(c),d={},b=0;while(i.length>b)n=o(c,t=i[b++]),void 0!==n&&l(d,t,n);return d}})},e000:function(e,t,n){"use strict";var c=n("7864"),o=n("f5ab");t["a"]=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"你确定要进行该操作吗?";return c["b"].confirm(n,"确认").then((function(){return Object(o["b"])(e,t)})).catch((function(e){console.log(e)}))}},e439:function(e,t,n){var c=n("23e7"),o=n("d039"),a=n("fc6a"),r=n("06cf").f,u=n("83ab"),l=o((function(){r(1)})),i=!u||l;c({target:"Object",stat:!0,forced:i,sham:!u},{getOwnPropertyDescriptor:function(e,t){return r(a(e),t)}})}}]);
//# sourceMappingURL=chunk-1b84f9f2.fbd16402.js.map